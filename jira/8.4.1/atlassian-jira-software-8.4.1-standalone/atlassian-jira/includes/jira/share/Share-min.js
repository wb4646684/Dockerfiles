define("jira/share/share-factory",["jira/share/controllers/edit-shares-controller","jira/share/controllers/select-single-share-type-controller","jira/share/entities/share-type/authenticated-user-share","jira/share/entities/share-type/project-share","jira/share/entities/share-type/global-share","jira/share/entities/share-type/group-share","jira/share/entities/share-type/any-share","jira/share/entities/share-type/user-share","jira/share/i18n","jquery","jira/featureflags/feature-manager"],function(e,r,a,t,s,i,n,h,l,o,p){"use strict";function u(){this.registeredControllers=new Map,this.saveStopped=!1}return u.prototype={registerEditShareTypes:function(r){var n=this.findDuplicatesInOtherModes.bind(this),l=this.preventSaveHandler.bind(this),p=new e(r,n,l);p.registerShareType(new s),p.registerShareType(new a),p.registerShareType(new i(r)),p.registerShareType(new t(r)),p.registerShareType(new h(r)),this.registeredControllers.set(r,p),o(document).ready(function(){p.initialise()})},registerSelectShareTypes:function(e){var a=new r;a.registerShareType(new n),a.registerShareType(new i(e)),a.registerShareType(new t(e)),p.isFeatureEnabled("com.atlassian.jira.sharedEntityEditRights")&&a.registerShareType(new h(e)),o(document).ready(function(){a.initialise()})},findDuplicatesInOtherModes:function(e,r){var a="editors"===r?"viewers":"editors",t=this.getController(a);if(!t)return!1;var s=t.findShareIndex(e);return-1!==s&&this.preventAddingDuplicate(s,r)},preventSaveHandler:function(e){var r=this.saveStopped;return this.saveStopped=e,r},preventAddingDuplicate:function(e,r){return"editors"===r?!confirm(l.getMessage("common.sharing.duplicate.viewers.warning"))||(this.getController("viewers").remove(e),!1):(this.getController("editors").animateShare(e),!0)},getController:function(e){return this.registeredControllers.get(e)}},new u}),AJS.namespace("JIRA.Share.i18n",null,require("jira/share/i18n")),AJS.namespace("JIRA.Share.toggleElements",null,require("jira/share/util").toggleElements),AJS.namespace("JIRA.Share.SharePermission",null,require("jira/share/entities/share-permission")),AJS.namespace("JIRA.Share.Display",null,require("jira/share/entities/display")),AJS.namespace("JIRA.Share.AnyShare",null,require("jira/share/entities/share-type/any-share")),AJS.namespace("JIRA.Share.GroupShare",null,require("jira/share/entities/share-type/group-share")),AJS.namespace("JIRA.Share.GlobalShare",null,require("jira/share/entities/share-type/global-share")),AJS.namespace("JIRA.Share.ProjectShare",null,require("jira/share/entities/share-type/project-share")),AJS.namespace("JIRA.Share.AuthenticatedUserShare",null,require("jira/share/entities/share-type/authenticated-user-share")),AJS.namespace("JIRA.Share.SelectSingleShareTypeController",null,require("jira/share/controllers/select-single-share-type-controller")),AJS.namespace("JIRA.Share.EditSharesController",null,require("jira/share/controllers/edit-shares-controller")),AJS.namespace("JIRA.Share.registerEditShareTypes",null,require("jira/share/share-factory").registerEditShareTypes),AJS.namespace("JIRA.Share.registerSelectShareTypes",null,require("jira/share/share-factory").registerSelectShareTypes),AJS.namespace("atlassian.jira.share",window,window.JIRA.Share);
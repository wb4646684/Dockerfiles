var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira/admin/analytics",["jira/project/projectdata","jira/util/events","jira/admin/admindata","jira/common/page","wrm/context-path","jira/util/data/meta","jquery","jira/analytics","jira/libs/parse-uri"],function(t,e,o,n,i,c,r,a,f){function l(t,e,o){return o="object"!==(void 0===o?"undefined":_typeof(o))?{}:o,e=e||"unknown",{name:"administration."+t+"."+e,properties:r.extend({type:e,tab:c.get("admin.active.tab"),section:c.get("admin.active.section")},o)}}function d(t,e){a.send(l("projectconfig.workflowscheme",t,e))}function s(t,e){a.send(l("workflowscheme",t,e))}function w(){return!!r(".status-draft").length}function u(t,e){return l("workflow",t,e)}function p(t,e){a.send(l("navigate",t,e))}function k(t,e){a.send(l("projectconfig.workflow",t,e))}function m(t,e){S.on("click",t,function(){var t=r(this).data("mode");a.send(u("selectmode",{mode:t,edit:e}))})}function g(t,e,o){a.send(u("edit",{mode:t,action:e,object:o}))}function j(){k("loadworkflowstab",{referrer:y(document.referrer)})}function h(t,e,o){S.on("click",t,function(){g("text",e,o)})}function v(t,e){"true"!==r(e.currentTarget).attr("aria-pressed")&&a.send({name:"projectconfig.toggle."+t})}function y(t){if("string"!=typeof t)return null;var e,o=f(t),n=c.get("projectKey");return e=o.path.slice(i().length),e=e.replace(/project-config\/(.*?)(\/|$)/,"project-config/PROJECTKEY$2"),n&&n.length&&(e=e.split(n).join("PROJECTKEY")),e}function b(){e.bind("addworkflow",function(){w()&&s("addworkflowtodraft")}),e.bind("assignissuetypes",function(){w()&&s("assignissuetypestodraft")}),S.on("click",".remove-all-issue-types",function(){w()&&s("deleteworkflowfromdraft")}),S.on("click","#discard-draft-dialog input[type=submit]",function(){x?d("discarddraft"):s("discarddraft")}),S.on("click","#view-original",function(){s("vieworiginalofdraft")}),S.on("click","#view-draft",function(){s("viewdraft")}),S.on("click","#publish-draft",function(){s("publishclicked")}),x||"draftMigrationSuccess"!==f(location).anchor||s("migrationcompleted"),e.bind("draftcreated",function(){x?d("draftcreated"):s("draftcreated")}),S.on("click","#workflowscheme-editor .workflow-text-view",function(){s("viewworkflow",{mode:"text"})}),S.on("click","#workflowscheme-editor .workflow-diagram-view",function(){s("viewworkflow",{mode:"diagram"})}),S.on("click","#project-config-panel-screens a.project-config-screen",function(){var t=r(this).data("operationId");1===t?a.send({name:"administration.screenschemes.editlink.clicked.operation.edit"}):2===t?a.send({name:"administration.screenschemes.editlink.clicked.operation.view"}):a.send({name:"administration.screenschemes.editlink.clicked.operation.create"})}),S.on("click",".project-config-more-link",function(){var t=r(this);p("morelink",{href:y(t.attr("href")),title:t.attr("title")})}),n.relatedContentElement().on("click","a",function(){var e=r(this),n=e.attr("id");n=/^view_project_issuetype_\d+$/.test(n)?"view_project_issuetype":n,p("tabs",{id:n,href:y(e.attr("href")),title:e.text(),isAdmin:o.isUserAdmin(),isSysAdmin:o.isUserSysAdmin(),projectType:t.getProjectType()})}),S.on("click","#project-config-header-name",function(){p("projectheader")}),S.on("click","#project-config-header-avatar",function(){p("projectavatar")}),S.on("click",".back-to-proj-config",function(){p("backtoproject",{href:y(r(this).attr("href"))})}),S.on("click",".project-config-summary-scheme a",function(){p("selectedscheme",{href:y(r(this).attr("href"))})}),S.on("click",".project-config-workflow-text-link",function(){k("viewastext")}),S.on("click",".project-config-screen",function(){k("gotoscreen")}),S.on("click",".project-config-workflow-edit",function(){k(r(this).closest(".project-config-workflow-default").length?"copyworkflow":"editworkflow")}),S.on("click",".issuetypeconfig-edit-workflow",function(){k("editworkflowissuetype")}),S.on("click","#toggleWorkflowTab",function(t){v("workflow",t)}),S.on("click","#toggleViewTab",function(t){v("view",t)}),S.on("click",".project-config-workflow-diagram-container",function(){k("enlargeworkflow")}),S.on("click","#project-config-workflows-view-original",function(){d("vieworiginalofdraft")}),S.on("click","#project-config-workflows-view-draft",function(){d("viewdraft")}),S.on("click","#project-config-workflows-scheme-change",function(){d("switchscheme")}),S.on("click","#project_import_link_lnk",function(){p("topnav.jim")}),m(".workflow-view-toggle",!1),m(".workflow-edit-toggle",!0),h("#workflow-step-add-submit","add","step"),h("#workflow-step-update","update","step"),h("#workflow-step-delete","remove","step"),h("#workflow-transition-add","add","transition"),h("#workflow-transition-update","update","transition"),h("#workflow-transition-delete","remove","transition"),h("#workflow-global-transition-update","update","globaltransition"),e.bind("wfd-edit-action",function(t,e){g("diagram",e.action,e.object)})}var S=r(document),_=c.get("admin.active.section"),x="atl.jira.proj.config"===_;return{bindEvents:b,event:l,sendProjectWorkflowSchemeEvent:d,sendLoadWorkflowsTabEvent:j}}),AJS.namespace("JIRA.Analytics",null,require("jira/admin/analytics"));
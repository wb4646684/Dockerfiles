!function(){"use strict";function e(){C("label.overlabel").overlabel()}function t(){var e=C("div.results"),t=e.width();e.bind("resultsWidthChanged",function(){C(this).css("width",100/t*(t-(parseInt(C(document.documentElement).prop("scrollWidth"),10)-C(window).width()))+"%")}),C(window).resize(function(){e.trigger("resultsWidthChanged")}),e.trigger("resultsWidthChanged"),C("#issuenav").bind("contractBlock expandBlock",function(){C(".results").trigger("resultsWidthChanged")})}function i(){C(".fieldTabs li").click(function(e){e.preventDefault(),e.stopPropagation();var t=C(this);t.hasClass("active")||(C(".fieldTabs li.active").removeClass("active"),t.addClass("active"),C(".fieldTabArea.active").removeClass("active"),C("#"+t.attr("rel")).addClass("active"))})}function a(){C("form").handleAccessKeys(),D.bind("dialogContentReady",function(){C("form",this.$content).handleAccessKeys({selective:!1})})}function n(){D.keydown(function(e){S.current&&27===e.which&&!C(e.target).is(":input")&&S.current.hide()})}function r(){new x({blockSelector:".twixi-block",storageCollectionName:"twixi"}).addCallback("toggle",function(){A.getStalker().trigger("stalkerHeightUpdated")}).addTrigger(".action-head .action-details","click"),new x({blockSelector:"#issue-filter .toggle-wrap:not(#navigator-filter-subheading-textsearch-group)",triggerSelector:".toggle-trigger",collapsedClass:"expanded",expandedClass:"collapsed",storageCollectionName:"navSimpleSearch"}),new x({blockSelector:".twixi-block",triggerSelector:".twixi-trigger",storageCollectionName:"twixi"}),new x({blockSelector:"#issuenav",triggerSelector:"a.toggle-lhc",collapsedClass:"lhc-collapsed",storageCollectionName:"lhc-state",autoFocusTrigger:!1}),C(".error","#issue-filter").parents(".toggle-wrap").removeClass("collapsed").addClass("expanded"),C("fieldset.content-toggle input[type='radio']").live("change",function(){var e=C(this);e.closest(".content-toggle").find("input[type='radio']").each(function(){var e=C(this);C("#"+e.attr("name")+"-"+e.val()+"-content").addClass("hidden")}),C("#"+e.attr("name")+"-"+e.val()+"-content").removeClass("hidden")})}function o(){C("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value").attr("disabled","disabled"),C("#log-work-adjust-estimate-"+C("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked").val()+"-value").removeAttr("disabled"),C("input[name=worklog_adjustEstimate],input[name=adjustEstimate]").change(function(){C("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value").attr("disabled","disabled"),C("#log-work-adjust-estimate-"+C(this).val()+"-value").removeAttr("disabled")})}function s(){var e=C("input:checked");0!==e.length&&("forgot-login-rb-forgot-password"===e.attr("id")?(C("#username,#password").addClass("hidden"),C("#password").removeClass("hidden")):"forgot-login-rb-forgot-username"===e.attr("id")&&(C("#username,#password").addClass("hidden"),C("#username").removeClass("hidden"))),C("#forgot-login-rb-forgot-password").change(function(){C("#username,#password").addClass("hidden"),C("#password").removeClass("hidden")}),C("#forgot-login-rb-forgot-username").change(function(){C("#username,#password").addClass("hidden"),C("#username").removeClass("hidden")})}function l(){C("input.upfile").each(function(){var e=C(this),t=e.closest(".field-group");e.change(function(){e.val().length>0&&t.next(".field-group").removeClass("hidden")})})}function c(){D.on("keydown","textarea",I.submitOnCtrlEnter),C("#jqltext").keypress(I.submitOnEnter)}function d(){var e=C("#browser-warning");C(".icon-close",e).click(function(){e.slideUp("fast"),N.save("UNSUPPORTED_BROWSER_WARNING","handled")})}function u(){C("form").submit(function(e){var t=new C.Event("before-submit");C(this).trigger(t),t.isDefaultPrevented()&&e.preventDefault()})}function f(){var e="#comment, #environment, #description";D.bind("tabSelect",function(t,i){i.pane.find(e).expandOnInput()}),C(e).expandOnInput(200),D.bind("dialogContentReady",function(t,i){i.get$popupContent().bind("tabSelect",function(t,i){i.pane.find(e).expandOnInput(200)}).find(e).expandOnInput(200)}),D.bind("showWikiInput",function(t,i){i.find(e).expandOnInput()})}function g(){var e=C("form.aui"),t=C("a.cancel",e);_.isIE()&&_.majorVersion()<12&&t.attr("accessKey")&&t.focus(function(e){e.altKey&&(C(this).mousedown(),window.location.href=t.attr("href"))})}function m(){var e=function(){C('[name="timetracking_targetsubfield"]').length&&C("#cbtimetracking").attr("checked",!!C('[name="timetracking_targetsubfield"]:checked').length)},t=function(t){C(t).closest(".availableActionRow").find("td:first :checkbox").attr("checked",!0),"timetracking_targetsubfield"===t.name&&e()};C("#availableActionsTable tr.availableActionRow").children("td:last-child").find(":input").change(function(){t(this)}),["originalestimate","remainingestimate"].forEach(function(e){var t=C("#timetracking_"+e+"_subfield");C("#timetracking_"+e).change(function(){t.attr("checked",!0)})}),C("form#bulkedit").submit(e)}function h(){var e=function(e){C(e).closest("tr").prev().find("td:first :checkbox").attr("checked",!0)};C("#availableActionsTable .availableActionRowMultiSelect").children("td:last-child").find(":input").change(function(){e(this)})}function p(){C("#availableActionsTable .availableActionMultiSelect select").change(function(){var e=C(this);e.closest("tr").next().toggleClass("hidden","removeall"===e.val())})}function v(){if(j.showmonitor){var e=C("<div class='perf-monitor'/>"),t=j["jira.request.server.time"]>2e3,i=j.jiraSQLstatements>50;t&&e.addClass("tooslow"),i&&e.addClass("toomanysql"),C("#header-top").append(e),new S(e,"perf-monitor-dialog",function(e,t,i){var a="<div>Page render time <strong>"+j["jira.request.server.time"]+" ms</strong>";j.jiraSQLstatements?(a+=" / SQL <strong>"+j.jiraSQLstatements+"@"+j.jiraSQLtime+" ms</strong></br>",a+='<a target="_blank" href='+P+"/sqldata.jsp?requestId="+j["jira.request.id"]+">More...</a>"):a+=" / No SQL statments",a+="</div>",e.empty().append(a),i()})}}function b(){C(".clickable").click(function(){window.location.href=C(this).find("a").attr("href")})}function w(e){C(".projects-list-trigger",e).each(function(){var e=C(this);e.click(!1);var t=e.attr("href");new S(this,t.substring(1),function(e,i,a){e.html(C(t).html()),a()},{onHover:!0,hideDelay:500,width:240})})}function k(){D.on("click","[data-helplink=local]",function(e){var t=this.getAttribute("href");return window.open(t,"jiraLocalHelp","resizable, scrollbars=yes").focus(),e.preventDefault(),!1})}var C=require("jquery"),j=require("aui/params"),S=require("aui/inline-dialog"),y=require("aui/tabs"),x=require("jira/toggleblock/toggle-block"),q=require("jira/ajs/browser/describe-browser"),A=require("jira/issue"),E=require("jira/message"),N=require("jira/data/cookie"),I=require("jira/util/forms"),R=require("jira/util/formatter"),O=require("jira/util/data/meta"),T=require("jira/util/events"),_=require("jira/util/navigator"),L=require("jira/skate"),M=require("jira/util/strings"),W=require("wrm/context-path"),P=W(),D=C(document);L("shared-item-trigger",{type:L.type.CLASSNAME,attached:function(e){var t=e.getAttribute("href");new S(e,t.substring(1),function(e,i,a){e.html(C(t).html()),a()},{width:240})}}),C(function(){r(),e(),t(),i(),a(),o(),s(),l(),c(),d(),u(),f(),g(),m(),h(),p(),n(),v(),b(),k(),w()}),q(),function(){T.bind("dialogContentReady",function(){y.setup()})}(),L("js-filter-form-edit",{type:L.type.CLASSNAME,extends:"form",events:{submit:function(e,t){if(!t.defaultPrevented){var i=M.escapeHtml(e.elements.filterName.value);E.showMsgOnReload(R.I18n.getText("editfilter.save.success",i),{type:"SUCCESS",closeable:!0,target:"body:not(:has(#edit-entity))"})}}}}),L("js-filter-form-subscription",{type:L.type.CLASSNAME,extends:"form",events:{submit:function(e,t){if(!t.defaultPrevented){var i=e.elements.groupName.value||O.get("remote-user-fullname");E.showMsgOnReload(R.I18n.getText("subscriptions.add.success",M.escapeHtml(i)),{type:"SUCCESS",closeable:!0,target:"body:not(:has(#filter-subscription))"})}}}})}();
define("jira/project/browse/layout",["jira/backbone.radio-2.0","jira/marionette-4.1","jira/util/data/meta","jira/util/users/logged-in-user","jira/project/browse/projecttypestabsview","jira/project/browse/tabsview","jira/project/browse/filterview","jira/project/browse/projectcollectionview","jira/pagination/paginationview"],function(e,t,i,a,o,r,s,c,n){"use strict";return t.View.extend({ui:{sidebar:"#browse-projects-sidebar",categoryNav:".category-nav",projectTypeNav:".project-type-nav",filter:"#filter-projects",content:"#projects",pagination:"#pagination"},regions:{sidebar:"@ui.sidebar",categoryNav:"@ui.categoryNav",projectTypeNav:"@ui.projectTypeNav",filter:"@ui.filter",content:"@ui.content",pagination:"@ui.pagination"},childViewEvents:{"project-type-change":"projectTypeChange","project-view.click-category":function(e){var t=e.get("projectCategoryId");this.categoryChange(t)},"category-change":"categoryChange",navigate:"clickPage","navigate-previous":"clickPrevious","navigate-next":"clickNext"},initialize:function(t){this.mergeOptions(t,["projects","categories","availableProjectTypes","filter"]),this.analyticsChannel=e.channel("browse-projects-analytics"),this.projectTypesTabsView=new o({collection:this.availableProjectTypes}),this.projectCategoriesTabsView=new r({collection:this.categories}),this.filterView=new s({model:this.filter}),this.projectCollectionView=new c({model:this.filter,collection:this.projects}),this.paginationView=new n({collection:this.projects}),this.hideSidebarIfAdmin()},render:function(){this.setUpProjectTypesView(),this.setUpProjectCategoriesView(),this.showChildView("filter",this.filterView),this.showChildView("content",this.projectCollectionView),this.showChildView("pagination",this.paginationView)},setUpProjectTypesView:function(){this.availableProjectTypes.length?this.showChildView("projectTypeNav",this.projectTypesTabsView):this.getUI("projectTypeNav").addClass("hidden")},setUpProjectCategoriesView:function(){""!==a.username()||this.categories.length>1?this.showChildView("categoryNav",this.projectCategoriesTabsView):this.getUI("categoryNav").addClass("hidden")},projectTypeChange:function(e){var t=this.availableProjectTypes.selectProjectType(e);t&&this.filter.changeProjectType(t)},categoryChange:function(e){var t=this.categories.getSelected().id,i=this.categories.selectCategory(e),a=this.getChildView("content");i&&t!==e&&(this.filter.changeCategory(i),"archived"!==e&&"archived"!==t||a.render())},hideSidebarIfAdmin:function(){i.get("in-admin-mode")&&this.getUI("sidebar").addClass("hidden")},clickPage:function(e){this.analyticsChannel.trigger("browse-projects.navigate-to-page",e)},clickPrevious:function(){this.analyticsChannel.trigger("browse-projects.navigate-to-previous")},clickNext:function(){this.analyticsChannel.trigger("browse-projects.navigate-to-next")}})});
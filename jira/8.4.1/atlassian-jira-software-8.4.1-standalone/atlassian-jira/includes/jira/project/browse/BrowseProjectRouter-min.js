define("jira/project/browse/router",["underscore","backbone","jira/util/navigation"],function(t,e,i){"use strict";return e.Router.extend({initialize:function(e){this.route(/(.*)/,"every",this.handleRouteChange),this.application=e.application,this.listenTo(this.application.layout.paginationView,"navigate",function(e){var a=t.extend(this.application.filter.getQueryParams(!1),{page:e});i.navigate(a)}),this.listenTo(this.application.layout.projectCollectionView,"sorted",function(e,a){var o=t.extend(this.application.filter.getQueryParams(!1),{sortColumn:e,sortOrder:a});i.navigate(o)}),this.application.filter.on("filter",function(t){i.navigate(t)})},handleRouteChange:function(){var t=+i.getParam("page",!0)||1,e=i.getParam("contains",!0)||"",a=i.getParam("selectedCategory")||"",o=i.getParam("sortColumn")||"",n=i.getParam("sortOrder")||"",r=i.getParam("selectedProjectType")||"",s=this.application.categories.selectCategory(a),l=this.application.availableProjectTypes.selectProjectType(r);e&&this.application.filter.set("contains",e,{silent:!0}),!1!==s&&this.application.filter.set("category",s.toJSON(),{silent:!0}),!1!==l&&this.application.filter.set("projectType",l.toJSON(),{silent:!0}),o&&this.application.filter.set("sortColumn",o,{silent:!0}),n&&this.application.filter.set("sortOrder",n,{silent:!0}),n&&o&&this.application.projects.updateSorting(o,n),this.application.filter.filterCollection(),t&&t!==this.application.projects.state.currentPage&&this.application.projects.getPage(t),this.application.layout.render()}})});
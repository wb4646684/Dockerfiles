AJS.test.require("jira.webresources:browseprojects",function(){"use strict";require(["jira/project/browse/projectmodel","jira/project/browse/projectcollection","jira/project/browse/projecttypesservice"],function(t,e,o){module("jira/project/browse/projectmodel",{setup:function(){this.firstCat={get:sinon.stub().withArgs("name").returns("first category")},this.secondCat={get:sinon.stub().withArgs("name").returns("second category")};var t=sinon.stub();t.withArgs("first").returns(this.firstCat),t.withArgs("second").returns(this.secondCat),this.catCollection={get:t},this.projects=[{id:"proj1",projectCategoryId:"first"},{id:"proj2",projectCategoryId:"second"},{id:"proj3",projectCategoryId:"third"},{id:"proj4"}],this.collection=new e(this.projects,{categories:this.catCollection,mode:"client",parse:!0})},assertProjectCategoryIsCorrect:function(t,e,o){var r=this.collection.get(t);ok(r);var s=r.toJSON();equal(s.projectCategoryId,e),equal(s.projectCategoryName,o)}}),test("should provide category name for known categories",function(){this.assertProjectCategoryIsCorrect("proj1","first","first category"),this.assertProjectCategoryIsCorrect("proj2","second","second category")}),test("should not include unknown categories",function(){this.assertProjectCategoryIsCorrect("proj3","third",void 0),this.assertProjectCategoryIsCorrect("proj4",void 0,void 0)}),test("should not include category when out of collection",function(){var e=new t({id:"project",projectCategoryId:"first"}).toJSON();equal(e.projectCategoryId,"first"),equal(e.projectCategoryName,void 0)}),test("should add the project type icon to the model",function(){o.init({business:{icon:"business-icon"}});var e=new t({projectTypeKey:"business"},{parse:!0}).toJSON();equal(e.projectTypeIcon,"business-icon")})})});
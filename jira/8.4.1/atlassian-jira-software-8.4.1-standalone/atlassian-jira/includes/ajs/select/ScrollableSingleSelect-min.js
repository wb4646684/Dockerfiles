define("jira/ajs/select/scrollable-single-select",["jira/jquery/deferred","jira/ajs/select/single-select","jira/ajs/list/pageable-list","jquery","underscore"],function(e,t,s,n,i){"use strict";return t.extend({init:function(e){var t={newResultsThreshold:90};e=n.extend(!0,t,e),this._super(e),this.newResultsThreshold=e.newResultsThreshold},_assignEventsToFurniture:function(){var e,t=this;this._super(),this.dropdownController.$layer.on("scroll",function(){100*this.scrollTop/t.newResultsThreshold>this.scrollHeight-this.clientHeight&&(e&&"resolved"!==e.state()||(e=t._fetchNewContent().done(function(){t.listController.isDisplayedAllItems()&&"function"==typeof t.scrolledToBottomHandler&&t.scrolledToBottomHandler()}).fail(function(){t.listController.showPageRenderError(),t.model.$element.one("suggestionsRefreshed",function(){e=void 0})})))})},_createListController:function(){var e=this;this.listController=new s({containerSelector:n(".aui-list",this.$container),groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,pageSize:this.options.pageSize,pagingThreshold:this.options.pagingThreshold,matchItemText:this.options.matchItemText,hasLinks:this.options.hasLinks,selectionHandler:function(t){var s=this.getFocused(),n=s.data("descriptor");return e.setSelection(n),e.$field.select(),t.preventDefault(),!1}})},_fetchNewContent:function(){var t=new e;return i.defer(function(){try{this.listController.addNextPage(),t.resolve()}catch(e){t.reject(e)}}.bind(this)),t}})});
define("jira/setup/setup-tracker",["jira/util/data/meta","jira/jquery/deferred","jquery","underscore"],function(e,t,n,r){function i(e){var t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function a(e){var i=t();if(r.isEmpty(C))i.reject();else{var a=n("<iframe>").css("display","none").attr("src",C+e);a.load(function(){i.resolve()}),a.appendTo("body"),setTimeout(function(){i.reject()},3e3)}return i.promise()}function u(){var t=e.get("setup-session-id"),n="jira.setup.session.id";return t?localStorage.setItem(n,t):t=localStorage.getItem(n),t}function s(){return{releasedInstantSetup:"true",instantSetup:e.get("instant-setup"),pg:window.location.pathname.replace(/\//g,"_"),product:"jira",SEN:e.get("SEN"),setupSessionId:u(),sid:e.get("server-id"),v:e.get("version-number")}}function o(){return a(i(s()))}function d(e){var e=e||{};return a(i(n.extend(s(),e)))}function c(e){var e=e||{};return a(i(n.extend(s(),e,{instantSetupCompleted:"true"})))}function p(){return a(i(n.extend(s(),{instantSetupAIDUserCreated:"true"})))}function l(){return a(i(n.extend(s(),{instantSetupAIDUserLogged:"true"})))}function f(){return a(i(n.extend(s(),{instantSetupMacJourneyComplete:"true"})))}function g(){return a(i(n.extend(s(),{instantSetupMacJourneyFailure:"true"})))}function v(){return a(i(n.extend(s(),{migrationsLinkClicked:"true"})))}function m(){return a(i(n.extend(s(),{connectingJiraToDatabaseLinkClicked:"true"})))}function S(e){var e=e||"";return a(i(n.extend(s(),{databaseOptionPicked:e})))}var C=e.get("setup-analytics-iframe-url");return{insert:o,sendInstantSetupCompletedEvent:c,sendMailConfigurationEvent:d,sendUserCreatedEvent:p,sendUserLoggedInEvent:l,sendUserArrivedFromMacSuccess:f,sendUserArrivedFromMacFailed:g,sendUserClickedOnMigrationsLink:v,sendUserClickedOnConnectingJiraToDatabaseLink:m,sendUserPickedDatabase:S}});